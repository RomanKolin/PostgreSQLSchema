CREATE SCHEMA firstschema;
CREATE SCHEMA secondschema;
CREATE TABLE firsttable(x int);
CREATE TABLE secondschema.secondtable(y int);
SET search_path='secondschema';
ALTER TABLE firsttable SET SCHEMA secondschema;
CREATE TABLE firsttable(z int);
CREATE TABLE firstschema.secondtable(a int);
ALTER TABLE firsttable SET SCHEMA firstschema;
INSERT INTO firstschema.firsttable(z) SELECT 30 + random() * 5 FROM generate_series(1,5);
INSERT INTO firstschema.secondtable(a) SELECT 40 + random() * 5 FROM generate_series(1,5);
INSERT INTO secondschema.firsttable(x) SELECT 10 + random() * 5 FROM generate_series(1,5);
INSERT INTO secondschema.secondtable(y) SELECT 20 + random() * 5 FROM generate_series(1,5);
SET search_path='firstschema';
DROP SCHEMA secondschema CASCADE;
SET search_path='public';
ALTER TABLE firstschema.firsttable SET SCHEMA=public;
ALTER TABLE firstschema.secondtable SET SCHEMA public;
DROP SCHEMA firstschema;
DROP TABLE firsttable;
DROP TABLE secondtable;
